{% load static %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>사회과학대학</title>
    <link rel=icon href="{% static 'reservation/titlelogo.png' %}" sizes="16x16" type="image/png">
    <link rel="stylesheet" href="{% static 'reservation/main.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
</head>
<body>
    <header>
        <div id="toplogo">
            <img src="{% static 'reservation/knu_logo.png' %}" alt="경북대학교">
        </div>
        <div class="logo">
            <img src="{% static 'reservation/navBtn.svg' %}" id="nav_btn" onclick="openNav()" alt="메뉴버튼">
            <h1><a href="{% url 'home' %}">사회과학대학</a></h1>
        </div>
        <nav id="mySidenav" class="sidenav">
            <ul>
                <a href="javascript:void(0)" class="navCloseBtn" onclick="closeNav()">&times;</a>
                {% if user.is_authenticated %}
                    <a href="#"><li class="navFirst">{{user.profile.realname}}<br>{{user.username}} / {{user.profile.department}}</li></a>
                    <a href="{% url 'myreservation' %}"><li>예약현황</li></a>
                    <a class="nav-link" href="javascript:{document.getElementById('logout').submit()}"><li>로그아웃</li></a>
                    <form id="logout" method="POST" action="{% url 'logout' %}">
                        {% csrf_token %}
                        <input type="hidden"/>
                    </form>
                {% else %}
                    <a href="{% url 'login' %}"><li>로그인</li></a>
                    <a href="{% url 'signup' %}"><li>회원가입</li></a>
                {% endif %}
            </ul>
        </nav>
    </header>
    <main>
        <section id="chart">
            <div class="chart_div" onclick="goNew1A()" style="cursor:pointer;">
                <canvas id="chart_1" width="7vw" height="7vh"></canvas>
            </div>
            <div class="chart_div" onclick="goNew3A()" style="cursor:pointer;">
                <canvas id="chart_2" width="7vw" height="7vh"></canvas>
            </div>
            <div class="chart_div" onclick="goNew3B()" style="cursor:pointer;">
                <canvas id="chart_3" width="7vw" height="7vh"></canvas>
            </div>
        </section>
        <section id="mypage">
            <a href="{% url 'myreservation' %}"><button id="btn_mypage">나의 예약 현황</button></a>
        </section>
        <section id="main_post">
            <div class="main_notice main_post_item">
                <h4><a href="#">공지사항</a></h4>
                <ul>
                    <li><a href="#">청소 관련 안내</a></li>
                    <li><a href="#">휴관 안내</a></li>
                    <li><a href="#">시험기간 연장 안내</a></li>
                </ul>
            </div>
            <div class="main_board main_post_item">
                <h4><a href="#">관계페이지</a></h4>
                <ul>
                    <li><a href="#">사회과학대학 학생회</a></li>
                    <li><a href="#">경북대 멋쟁이 사자처럼</a></li>
                    <li><a href="#">제작자 페이지</a></li>
                </ul>
            </div>
        </section>
    </main>
    <script src="{% static 'reservation/main.js' %}"></script>
    <script>
        // New 페이지 이동
        function goNew1A(){
            location.href="/reservation/new/1A";
        }
        function goNew3A(){
            location.href="/reservation/new/3A";
        }
        function goNew3B(){
            location.href="/reservation/new/3B";
        }
        new Chart(document.getElementById("chart_1"),
            {
                "type":"doughnut",
                "data":{
                    "datasets":[
                        {
                            "data":[1, 2],
                            "backgroundColor":["rgba(255, 205, 86)","rgba(79, 81, 81, .3)"],
                            "borderWidth": 0.3
                        },
                    ]
                }
            });
        new Chart(document.getElementById("chart_2"),
            {
                "type":"doughnut",
                "data":{
                    "datasets":[
                        {
                            "data":[2, 1],
                            "backgroundColor":["rgba(255, 99, 132)","rgba(79, 81, 81, .3)"],
                            "borderWidth": 0.3
                        }
                    ]
                }
            });
        new Chart(document.getElementById("chart_3"),
            {
                "type":"doughnut",
                "data":{
                    "datasets":[
                        {
                            "data":[1, 3],
                            "backgroundColor":["rgba(54, 162, 235)","rgba(79, 81, 81, .3)"],
                            "borderWidth": 0.3
                        }
                    ]
                }
            });
    </script>
</body>
</html>